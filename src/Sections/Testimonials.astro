---
// src/Sections/Testimonials.astro
import TestimonialCard from "../components/LoopComponents/TestimonialCard.jsx";
import BorderTitle from "../components/BorderTitle.jsx";
import Carousel from "../components/Carousels/Carousel.jsx";
import Heading from "../components/Heading.jsx";
import AnimatedElementWrapper from "../components/AnimatedElementWrapper.jsx";
import { testimonials } from "../testimonials";

const STAGGER_MS = 120;
---

<section class="outer-section bg-bg relative">
  <div class="section-color-border"/>
  <div class="inner-section">
    <div class="text-section">
      <BorderTitle client:visible>Testimonials</BorderTitle>
      <Heading
        tagName="h2"
        className="mb-6"
        before="What Our "
        text="Clients Say"
        textClass="emphasized-text"
        client:visible
      />
      <p class="large-text">
        Don't just take our word for it - hear from businesses who've
        transformed...
      </p>
    </div>

    <Carousel
      items={testimonials}
      renderItem={(t, i = 0) => (
        <AnimatedElementWrapper
          variant="scale-in"
          animationDuration={600}
          animationDelay={i * STAGGER_MS}
          threshold={0.2}
          rootMargin="0px 0px -50px 0px"
          once={false}
          client:visible
        >
          <TestimonialCard data={t} client:visible />
        </AnimatedElementWrapper>
      )}
      slidesPerView={{ base: 1, md: 2 }}
      gap={32}
      autoplay
      autoAdvanceDelay={4500}
      showArrows={false}
      showDots
      drag={false}
      client:visible
    />
  </div>
</section>